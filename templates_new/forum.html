{% extends "base.html" %}

{% block content %}

<div class="forum-layout">
  <aside class="sidebar">
    <div class="sidebar-title">Categories</div>
    <ul>
      {% for s in sections %}
        <li><a href="#{{ s.id }}">{{ s.title }}</a></li>
      {% endfor %}
    </ul>
  </aside>

  <main class="forum-main">
    {% for s in sections %}
      <section id="{{ s.id }}" class="forum-section">
        <div class="section-bar">
          <h2>{{ s.title }}</h2>
        </div>

        <div class="forum-table">
          <div class="forum-head row">
            <div class="c-forum">Forum</div>
            <div class="c-threads">Threads</div>
            <div class="c-posts">Posts</div>
            <div class="c-last">Last Post</div>
          </div>

          {% for f in s.forums %}
          <div class="forum-row row">
            <div class="c-forum">
              <span class="icon">{{ f.icon }}</span>
              <div class="meta">
                <a class="forum-name" href="{{ url_for('main.forum_category', category_name=f.key) }}">{{ f.name }}</a>
                <div class="forum-desc">{{ f.desc }}</div>
              </div>
            </div>
            <div class="c-threads">{{ "{:,}".format(f.threads) }}</div>
            <div class="c-posts">{{ "{:,}".format(f.posts) }}</div>
            <div class="c-last">
              <a class="last-title" href="{{ f.last.url }}">{{ f.last.title }}</a>
              <div class="last-meta">by <span class="user">{{ f.last.user }}</span> â€¢ {{ f.last.time }}</div>
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
    {% endfor %}
  </main>
</div>

{% endblock %}

{% block extra_css %}
<style>
/* Layout */
.forum-layout { display: grid; grid-template-columns: 260px 1fr; gap: 18px; align-items: start; }
.sidebar { position: sticky; top: 90px; background: #0c0f14; border: 1px solid #1e2633; border-radius: 8px; padding: 14px; }
.sidebar-title { font-weight: 700; margin-bottom: 8px; }
.sidebar ul { list-style: none; padding: 0; margin: 0; }
.sidebar li { margin: 6px 0; }
.sidebar a { text-decoration: none; }

.forum-main { display: flex; flex-direction: column; gap: 28px; }

/* Section header bar */
.section-bar {
  background: linear-gradient(180deg, #1a2230 0%, #111823 100%);
  border: 1px solid #273142;
  border-left: 4px solid #3bd16f; /* subtle brand accent */
  padding: 10px 14px;
  border-radius: 8px;
}
.section-bar h2 { margin: 0; font-size: 18px; }

/* Table */
.forum-table { width: 100%; border: 1px solid #1e2633; border-radius: 8px; overflow: hidden; }
.row { display: grid; grid-template-columns: 1fr 120px 120px 38%; align-items: start; }
.forum-head { background: #0f1520; color: #c9d4e3; font-weight: 600; padding: 10px 12px; border-bottom: 1px solid #1e2633; }
.forum-row { padding: 12px; border-bottom: 1px solid #151b24; }
.forum-row:hover { background: #0d1320; }

.c-forum { display: flex; gap: 10px; }
.icon { font-size: 20px; line-height: 1; margin-top: 2px; }
.meta { display: grid; gap: 2px; }
.forum-name { font-weight: 700; text-decoration: none; }
.forum-desc { font-size: 13px; color: #aab6c5; }

.c-threads, .c-posts { text-align: right; font-variant-numeric: tabular-nums; }
.c-last .last-title { display: block; text-decoration: none; font-weight: 600; }
.c-last .last-meta { font-size: 12px; color: #9fb0c5; margin-top: 2px; }

/* Responsive */
 @media (max-width: 1100px) {
  .forum-layout { grid-template-columns: 1fr; }
  .sidebar { position: static; order: 2; }
  .row { grid-template-columns: 1fr 90px 90px 40%; }
}
 @media (max-width: 780px) {
  .forum-head { display: none; }
  .row { grid-template-columns: 1fr; }
  .c-threads, .c-posts, .c-last { margin-top: 8px; }
}
</style>
{% endblock %}