{% extends "layout.html" %}

{% block title %}Admin - Grade Pending Picks{% endblock %}

{% block content %}
<div class="container page-container">
    <div class="admin-header">
        <h1 class="page-title">Pick Grading Control Panel</h1>
        <p class="page-subtitle">Here lies the record. Ensure its integrity. There are currently <strong>{{ picks|length }}</strong> picks awaiting grading.</p>
    </div>

    <div class="admin-table-container">
        {% if picks %}
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>User</th>
                        <th>Pick Details</th>
                        <th>Submission Time (UTC)</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for pick in picks %}
                        <tr>
                            <td>{{ pick.id }}</td>
                            <td>{{ pick.picker.username }}</td>
                            <td>
                                <strong>{{ pick.pick_selection }}</strong><br>
                                <small>{{ pick.event_details }} | {{ pick.sport }}</small>
                            </td>
                            <td>{{ pick.submission_timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
                            <td>
                                <form method="POST" action="{{ url_for('grade_picks') }}" class="grading-form">
                                    <input type="hidden" name="pick_id" value="{{ pick.id }}">
                                    <select name="status" class="form-control-sm">
                                        <option value="Win">Win</option>
                                        <option value="Loss">Loss</option>
                                        <option value="Push">Push</option>
                                    </select>
                                    <button type="submit" class="btn btn-secondary btn-sm">Grade</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <div class="content-box">
                <p>The record is clean. There are no pending picks to grade. Well done.</p>
            </div>
        {% endif %}
    </div>

</div>
{% endblock %}
