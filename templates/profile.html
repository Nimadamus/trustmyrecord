{% extends "base.html" %}
{% block content %}
    <h1>{{ user.username }}'s Profile</h1>
    <div class="profile-info">
        <p><strong>Email:</strong> {{ user.email }}</p>
        {# Add other user details here as you add them to the User model #}
        {# <p><strong>Favorite Sport:</strong> {{ user.favorite_sport if user.favorite_sport else 'Not set' }}</p> #}
        {# <p><strong>Bio:</strong> {{ user.bio if user.bio else 'No bio yet.' }}</p> #}

        {# Basic Stats - we'll expand these later #}
        <div class="profile-stats">
            <h4>Statistics</h4>
            {# Example: <p><strong>Win Percentage:</strong> {{ "%.2f"|format(user.win_percentage) }}%</p> #}
            <p>No specific stats tracked yet.</p>
        </div>
    </div>

    {% if user == current_user %} {# Only show edit profile link if viewing own profile #}
        <a href="{{ url_for('edit_profile') }}">Edit Profile</a> {# You'll need to create an edit_profile route and template for this #}
    {% endif %}

    {# Display user's posts on their profile page #}
    {% if user_posts %}
        <h3>Recent Posts:</h3>
        {% for post in user_posts %}
            <article class="media content-section border p-3 mb-3 rounded">
                <div class="media-body">
                    <h2><a class="article-title" href="{{ url_for('view_post', post_id=post.id) }}">{{ post.title }}</a></h2> {# Need to implement view_post route later #}
                    <p class="article-content">{{ post.content[:100] }}...</p>
                    <small>Posted on {{ post.date_posted.strftime('%Y-%m-%d %H:%M') }}</small>
                </div>
            </article>
        {% endfor %}
    {% elif user == current_user %}
        <p>You haven't made any posts yet. <a href="{{ url_for('new_post') }}">Create one!</a></p>
    {% endif %}
{% endblock %}
